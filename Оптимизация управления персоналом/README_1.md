# Оптимизация управления персоналом
Учебный проект

HR-аналитики компании «Работа с заботой» помогают бизнесу оптимизировать управление персоналом: бизнес предоставляет данные, а аналитики предлагают, как избежать финансовых потерь и оттока сотрудников. В этом HR-аналитикам пригодится машинное обучение, с помощью которого получится быстрее и точнее отвечать на вопросы бизнеса. Компания предоставила данные с характеристиками сотрудников компании. Среди них — уровень удовлетворённости сотрудника работой в компании. Эту информацию получили из форм обратной связи: сотрудники заполняют тест-опросник, и по его результатам рассчитывается доля их удовлетворённости от 0 до 1, где 0 — совершенно неудовлетворён, 1 — полностью удовлетворён. Собирать данные такими опросниками не так легко: компания большая, и всех сотрудников надо сначала оповестить об опросе, а затем проследить, что все его прошли.

## Цели проекта:

Первая — построить модель, которая сможет предсказать уровень удовлетворённости сотрудника на основе данных заказчика.

Вторая — построить модель, которая сможет на основе данных заказчика предсказать то, что сотрудник уволится из компании.

Задачи проекта:

Задача 1: предсказание уровня удовлетворённости сотрудника:

1. Загрузка данных.
2. Предобработка данных.
3. Исследовательский анализ данных.
4. Подготовка данных.
5. Обучение моделей.
6. Сделать выводы.

Задача 2: предсказание увольнения сотрудника из компании:

1. Загрузка данных.
2. Предобработка данных.
3. Исследовательский анализ данных.
4. Добавление нового входного признака.
5. Подготовка данных.
6. Обучение модели.
7. Выводы
8. Общий вывод.

## Исходные данные

Данные с признаками:

- id — уникальный идентификатор сотрудника;
- dept — отдел, в котором работает сотрудник;
- level — уровень занимаемой должности;
- workload — уровень загруженности сотрудника;
- employment_years — длительность работы в компании (в годах);
- last_year_promo — показывает, было ли повышение за последний год;
- last_year_violations — показывает, нарушал ли сотрудник трудовой договор за последний год;
- supervisor_evaluation — оценка качества работы сотрудника, которую дал руководитель;
- salary — ежемесячная зарплата сотрудника;
- job_satisfaction_rate — уровень удовлетворённости сотрудника работой в компании, целевой признак.

## План проведения исследования.

Шаг 1: предсказание уровня удовлетворённости сотрудника:

1. Загрузка данных.
2. Предобработка данных.
3. Исследовательский анализ данных. Провести корреляционны анализ.
4. Подготовка данных.
5. Обучение моделей.
6. Сделать выводы. Сделать промежуточные выводы о том, какая модель справилась лучше и почему.

Задача 2: предсказание увольнения сотрудника из компании:

1. Загрузка данных.
2. Предобработка данных.
3. Исследовательский анализ данных.
4. Добавление нового входного признака. Допустим, job_satisfaction_rate и quit действительно связаны и вы получили необходимое значение метрики в первой задаче. Тогда добавим job_satisfaction_rate, предсказанный лучшей моделью первой задачи, к входным признакам второй задачи.
5. Подготовка данных.
6. Обучение модели.
- Обучить как минимум три модели.
- Как минимум для двух из них подберем гиперпараметры с помощью пэплайна.
- Проверить качество лучшей модели.
- Метрика оценки качества в этой задаче — ROC-AUC. Критерий успеха: ROC-AUC ≥0.91 на тестовой выборке.
- при необходимости проведем анализ признаков, выберем лучшие и проверим метрику.
7. Выводы. 
8. Общий вывод. Добавить выводы и дополнительные предложения для бизнеса. Сделайте выводы о значимости признаков: какие признаки мало значимы для модели; какие признаки сильнее всего влияют на целевой признак; как можно использовать эти наблюдения при моделировании и принятии бизнес-решений.

Использованные библиотеки:

- import pandas as pd
- import matplotlib.pyplot as plt
- import seaborn as sns
- import os
- from sklearn.model_selection import train_test_split
- from sklearn.preprocessing import PolynomialFeatures
- from sklearn.preprocessing import OneHotEncoder, OrdinalEncoder, StandardScaler, MinMaxScaler
- from sklearn.model_selection import GridSearchCV
- import numpy as np
- from sklearn.linear_model import LogisticRegression
- from sklearn.metrics import make_scorer, confusion_matrix
- plt.rcParams["figure.figsize"] = (10,8)
- from sklearn.tree import plot_tree
- import phik
- from sklearn.model_selection import cross_val_score
- from sklearn.pipeline import Pipeline
- from sklearn.compose import ColumnTransformer
- from sklearn.impute import SimpleImputer
- from sklearn.metrics import roc_auc_score
- from sklearn.model_selection import RandomizedSearchCV
- from sklearn.linear_model import LinearRegression
- from sklearn.neighbors import KNeighborsClassifier
- from sklearn.tree import DecisionTreeClassifier, DecisionTreeRegressor
- from sklearn.inspection import permutation_importance
- from sklearn.feature_selection import SelectKBest
- from sklearn.feature_selection import f_classif, mutual_info_classif
- from sklearn.preprocessing import LabelEncoder

Общий вывод.¶

Для для каждой задачи данные представлены в трех файлах: отдельно тренировочные данные, отдельно входные тестовые данные и отдельно целевой признак тестовых данных. Данные первой задачи прошли предобработку, исследовательский анализ, подготовку данных в паплайне. Была создана новая метрика SMAPE для проверка качества модели. Была проверена метрика на линейной регрессии и дереве решений. Дерево решений показало лучшую метрику. Далее различными методами подбирали лучшие гиперпараметры для дерева решений. GridSearchCV подобрал лучшие параметры, модель показала метрику 14,6 на тестовой выборке. Попытка улучшить метрику отбором признаков не увенчалась успехом. Но анализ признаков показал, что уровень удовлетворенности работников работой стоит обратить внимание на оценку руководителей работой сотрудников, нарушение трудового договора, длительность работы в компании, уровень должности. Кроме уровня должности, на этот набор факторов компания повлиять не может.

Данные второй задачи также прошли предобработку, исследовательский анализ. Был составлен портрет уволившего сотрудника, который показал, что зарплата уволенных ниже, чем у оставшихся. Проверено, что уволившиеся работники чаще менее удовлетворены работой, чем те, кто остался. Возникла гипотеза, что между этими признаками сильная взаимосвязь. В данные был добавлен новый признак job_satisfaction_rate — прогноз удовлетворенности работой новым набором сотрудников.

Далее данные подготовлены паплайном, и RandomizedSearchCV выбрал лучшую модель дерево решений с лучшими гиперпараметрами. Метрика этой модели 90. Далее проанализированы признаки модели на значимость. Оказалось, что удовлетворенность работой не сильно влияет на факт увольнения. А устранение наименее значимых признаков и использование паплайна для выбора новой лучшей модели и гиперпараметров привелов к модели ближайших соседей и метрике 91,5. Эта модель поможет предсказать увольнение и даст возможность компании задержать ценные кадры, приняв во внимание, что больше всего на факт увольнения влияют: длительность работы в компании, уровень должности, оценка качества работы, зарплата. На зарплату и уровень должности компания в силах повлиять.

Рекомендации для бизнеса: давать повышение должности ценным кадрам, на которых укажут руководители, увеличивать зарплату. Я бы посоветовала добавить признаки при сборе данных: степень удовлетворенность работника коллективом, кто влияет на плохую оценку коллектива, степень удовлетворенность работника руководителем.
